<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Interactive component | US Museums and Libraries Analysis</title>
  <meta name="description" content="Chapter 5 Interactive component | US Museums and Libraries Analysis" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Interactive component | US Museums and Libraries Analysis" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Interactive component | US Museums and Libraries Analysis" />
  
  
  

<meta name="author" content="Group 5: Yuanyi Hu, Yining Ma, Yi Zhuang" />


<meta name="date" content="2022-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">USMuseums&Libraries</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#museum-data-source"><i class="fa fa-check"></i><b>3.1.1</b> Museum Data Source</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#library-data-source"><i class="fa fa-check"></i><b>3.1.2</b> Library Data Source</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#museum-data-cleaning"><i class="fa fa-check"></i><b>3.2.1</b> Museum Data Cleaning</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#library-data-cleaning"><i class="fa fa-check"></i><b>3.2.2</b> Library Data Cleaning</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing value analysis</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#museum-data"><i class="fa fa-check"></i><b>3.3.1</b> Museum Data</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#library-data"><i class="fa fa-check"></i><b>3.3.2</b> Library Data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#museum-in-us"><i class="fa fa-check"></i><b>4.1</b> Museum in US</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="results.html"><a href="results.html#discipline-museums-distribution-in-states"><i class="fa fa-check"></i><b>4.1.1</b> Discipline Museums Distribution in States</a></li>
<li class="chapter" data-level="4.1.2" data-path="results.html"><a href="results.html#relationship-between-income-and-discipline"><i class="fa fa-check"></i><b>4.1.2</b> Relationship Between Income and Discipline</a></li>
<li class="chapter" data-level="4.1.3" data-path="results.html"><a href="results.html#relationship-between-location-and-revenue"><i class="fa fa-check"></i><b>4.1.3</b> Relationship Between Location and Revenue</a></li>
<li class="chapter" data-level="4.1.4" data-path="results.html"><a href="results.html#new-museums-trend"><i class="fa fa-check"></i><b>4.1.4</b> New Museums Trend</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#library-in-us"><i class="fa fa-check"></i><b>4.2</b> Library in US</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="results.html"><a href="results.html#analysis-of-library-2020"><i class="fa fa-check"></i><b>4.2.1</b> Analysis of Library 2020</a></li>
<li class="chapter" data-level="4.2.2" data-path="results.html"><a href="results.html#time-series-analysis"><i class="fa fa-check"></i><b>4.2.2</b> Time Series Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#museum-and-library-in-us"><i class="fa fa-check"></i><b>4.3</b> Museum and Library in US</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="results.html"><a href="results.html#museum-map"><i class="fa fa-check"></i><b>4.3.1</b> Museum map</a></li>
<li class="chapter" data-level="4.3.2" data-path="results.html"><a href="results.html#library-map"><i class="fa fa-check"></i><b>4.3.2</b> Library map</a></li>
<li class="chapter" data-level="4.3.3" data-path="results.html"><a href="results.html#relationship-between-museum-and-library-distributions"><i class="fa fa-check"></i><b>4.3.3</b> Relationship between museum and library distributions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#museum"><i class="fa fa-check"></i><b>6.1</b> Museum</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-component.html"><a href="interactive-component.html#library"><i class="fa fa-check"></i><b>6.2</b> Library</a></li>
<li class="chapter" data-level="6.3" data-path="conclusion.html"><a href="conclusion.html#regional-cultural-development"><i class="fa fa-check"></i><b>6.3</b> Regional Cultural development</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">US Museums and Libraries Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Interactive component<a href="interactive-component.html#interactive-component" class="anchor-section" aria-label="Anchor link to header"></a></h1>
This is a interactive webpage related to our project. You can choose to guess the states rank top five on number of library or museum in the state and click the bar to get the answer. By clicking on the button, you can choose to switch from library to museum or vice versa. Hope you enjoy this!
<script src="https://d3js.org/d3.v7.js"></script>
<h1>
Check state ranks of owing libraries or museums
</h1>
<button type="button" id="library" class="btn btn-default" value="library">
Library
</button>
<button type="button" id="museum" class="btn btn-default" value="museum">
Museum
</button>
<div id="plot">

</div>
<script>

// Create svg and initial bars

  const w = 800;
  const h = 600;
  const margin = {top: 50, right: 0, bottom: 50,
      left: 50};
  const innerWidth = w - margin.left - margin.right;
  const innerHeight = h - margin.top - margin.bottom;

  const bardata = [{num:"1226",stat:"California"},{num:"1083",stat:"New York"},{num:"893",stat:"Texas"},{num:"792",stat:"Illinois"},{num:"777",stat:"Ohio"}];
  
  const mubardata = [{num:"2409",stat:"California"},{num:"2020",stat:"New York"},{num:"1682",stat:"Texas"},{num:"1495",stat:"Pennsylvania"},{num:"1243",stat:"Ohio"}];
  
  const bardata2=[1226,1083,893,792,777];
  const mubardata2=[2409,2020,1682,1495,1243];
  
  drawbars(bardata,bardata2);
  
  function drawbars(dataset,dataset2){ 
    var name='libraries'
    if (dataset==mubardata){
         name='museums'
    };
    const xScale = d3.scaleBand()
        .domain(d3.range(dataset.length))
        .range([0, innerWidth])
        .paddingInner(.1);
  
    const yScale = d3.scaleLinear()
        .domain([0, d3.max(dataset2)])
        .range([innerHeight, 0])
  
    const xAxis = d3.axisBottom()
        .scale(xScale);
  
    const yAxis = d3.axisLeft()
        .scale(yScale);
  
  // add svg
  
    const svg = d3.select("div#plot")
      .append("svg")
        .attr("width", w)
        .attr("height", h);
  
  // add background rectangle
  
    svg.append("rect")
        .attr("x", 0)
        .attr("y", 0)
        .attr("width", w)
        .attr("height", h)
        .attr("fill", "aliceblue");
  
// add bars as a group

    const bars = svg.append("g")
        .attr("id", "plot")
        .attr("transform", `translate (${margin.left}, ${margin.top})`)
        .selectAll("rect")
        .data(dataset);
  
    bars.enter().append("rect")
        .attr("id",d=>d.stat)
        .attr("x", (d, i) => xScale(i))
        .attr("y", d => yScale(d.num))
        .attr("width", xScale.bandwidth())
        .attr("height", d => innerHeight - yScale(d.num))
        .attr("fill", "lightgreen");
        
  //add labels
    d3.select("g")
        .selectAll("text")
        .data(dataset2)
        .enter()
        .append("text")
        .attr("x", (d, i) => xScale(i) + .5*xScale.bandwidth())
        .attr("y", d => yScale(d) + 25)
        .text(d=>d)
        .attr("fill", "blue")
        .attr("text-anchor", "middle");
  
  // add axes
    svg.append("g")
        .attr("class", "xAxis")
        .attr("transform", `translate (${margin.left}, ${h - margin.bottom})`)
        .call(xAxis);
  
    svg.append("g")
        .attr("class", "yAxis")
        .attr("transform", `translate (${margin.left}, ${margin.top})`)
        .call(yAxis);
        
  //interaction text
    d3.select("g")
        .append("text")
        .attr("x", d => w/2)
        .attr("y", d => 0)
        .text(`Guess who ranks top on having ${name}?`)
        .attr("fill", "black")
        .attr("font-size","20")
        .attr("text-anchor", "middle");
      d3.select("g")
        .append("text")
        .attr("x", d => w/2)
        .attr("y", d => 20)
        .text('(click the bar to find out the answer)')
        .attr("fill", "black")
        .attr("font-size","20")
        .attr("text-anchor", "middle");
  
    //interaction
    d3.selectAll("rect")
      .on("click", function(event) {
      const state = d3.select(event.currentTarget).attr("id");
      const dx=d3.select(event.currentTarget).attr("x");
      const dy=d3.select(event.currentTarget).attr("y");
      if (state != null){
        d3.select("g")
          .append("text")
          //d3.select("text")
          .attr("x",d=>dx)
          .attr("y",d=>dy)
          .text(`This is ${state} state.`);
        d3.select(event.currentTarget).attr("fill","pink");
        }
        });
}
    d3.select("#library")
        .on("click", function () {
         d3.selectAll("svg").remove()
         drawbars(bardata,bardata2)
        });  
        
     d3.select("#museum")
     .on("click", function () {
        d3.select("svg").remove()
        drawbars(mubardata,mubardata2)
    });
 </script>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yiningma1001/USMuseumsAndLibraries/edit/main/interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/yiningma1001/USMuseumsAndLibraries/blob/main/interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
